!function(){"use strict";class e{constructor(e){this._modal=document.querySelector(e),this._modalClose=this._modal.querySelector(".modal__close"),this._handleEscClose=this._handleEscClose.bind(this)}_handleEscClose(e){"Escape"===e.key&&this.close()}open(){window.addEventListener("keydown",this._handleEscClose),this._modal.classList.add("modal_open")}close(){this._modal.classList.remove("modal_open"),window.removeEventListener("keydown",this._handleEscClose)}setEventListeners(){this._modalClose.addEventListener("click",(()=>this.close())),this._modal.addEventListener("mousedown",(e=>{e.target.classList.contains("modal_open")&&this.close()}))}}class t extends e{constructor(e){let{modalSelector:t,handleFormSubmit:i}=e;super(t),this._form=this._modal.querySelector(".modal__form"),this._handleFormSubmit=i,this.setEventListeners()}_getInputValues(){return this._inputList=this._form.querySelectorAll(".modal__input"),this._formValues={},this._inputList.forEach((e=>{this._formValues[e.name]=e.value})),this._formValues}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}reset(){this._form.reset()}}class i{constructor(e){let{data:t,selector:i,clickEventHandler:s,deleteEventHandler:r,likeEventHandler:n}=e;console.log(t),this._src=t.link,this._alt=t.name,this._textContent=t.name,this._selector=i,this._clickEventHandler=s,this._deleteEventHandler=r,this._likeEventHandler=n}_getTemplate(){return document.querySelector(this._selector).content.querySelector(".card").cloneNode(!0)}_fillImageCard(){this._cardImage.src=this._src,this._cardImage.alt=this._alt,this._cardLabel.textContent=this._textContent}setEventListeners(){this._cardImage.addEventListener("click",(()=>{this._clickEventHandler()})),this._deleteCardButton.addEventListener("click",(e=>{this._deleteEventHandler(e)})),this._cardLikeButton.addEventListener("click",(e=>{this._likeEventHandler(e)}))}getCardElement(){return this._element=this._getTemplate(),this._cardImage=this._element.querySelector(".card__image"),this._cardLikeButton=this._element.querySelector(".card__heart"),this._deleteCardButton=this._element.querySelector(".card__delete"),this._cardLabel=this._element.querySelector(".card__label-text"),this._fillImageCard(),this.setEventListeners(),this._element}}function s(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class r{constructor(e,t){s(this,"_showInputError",((e,t)=>{const i=this._formElement.querySelector(`#${e.id}-error`);i.textContent=t,i.classList.add(this._configDict.errorClass)})),s(this,"_hideInputError",(e=>{const t=this._formElement.querySelector(`#${e.id}-error`);t.classList.remove(this._configDict.errorClass),t.textContent=""})),s(this,"_hasInValidInput",(()=>this._inputList.some((e=>!e.validity.valid)))),s(this,"_toggleButtonState",(()=>{this._hasInValidInput()?this._disableSubmit():(this._buttonElement.classList.remove(this._configDict.inactiveButtonClass),this._buttonElement.removeAttribute("disabled",!0))})),s(this,"_checkInputValidity",(e=>{e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)})),s(this,"_disableSubmit",(()=>{this._buttonElement.setAttribute("disabled",!0),this._buttonElement.classList.add(this._configDict.inactiveButtonClass)})),s(this,"enableValidation",(()=>{this._setEventListeners()})),s(this,"resetValidation",(()=>{this._inputList.forEach((e=>{this._hideInputError(e)})),this._disableSubmit()})),this._configDict=e,this._formElement=t}_setEventListeners(){this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._inputList=Array.from(this._formElement.querySelectorAll(this._configDict.inputSelector)),this._buttonElement=this._formElement.querySelector(this._configDict.submitButtonSelector),this._toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))})),this._formElement.addEventListener("reset",(()=>{this._disableSubmit()}))}}class n extends e{constructor(e,t){let{src:i,alt:s}=e;super(t),this._src=i,this._alt=s,this._modalImage=this._modal.querySelector(".modal__image-expanded"),this._modalText=this._modal.querySelector(".modal__image-label"),super.setEventListeners(),console.log(this._src),console.log(this._alt)}open(){this._modalImage.src=this._src,this._modalImage.alt=this._alt,this._modalText.textContent=this._alt,console.log(this._modalImage.src),super.open()}}const o={formSelector:".modal__form",inputSelector:".modal__input",inputErrorSelector:".modal__input-error",submitButtonSelector:".modal__submit",inactiveButtonClass:"modal__submit_inactive",errorClass:"modal__input-error_display"},l=Array.from(document.querySelectorAll(o.formSelector)),a=document.querySelector(".profile__pen"),c=document.querySelector("#profile-edit"),d=c.querySelector(".modal__form").name,m=c.querySelector("#profile-modal-name"),_=c.querySelector("#profile-modal-job"),h="#card",u=document.querySelector(".profile__add-button"),p=(document.querySelector("#add-card").querySelector(".modal__form"),{});l.forEach((e=>{const t=new r(o,e);p[e.name]=t,t.enableValidation()}));const f=new class{constructor(e){let{nameSelector:t,jobSelector:i}=e;this._nameSelector=t,this._jobSelector=i,this._profileName=document.querySelector(t),this._profileJob=document.querySelector(i)}getUserInfo(){return{profileName:this._profileName.textContent,profileJob:this._profileJob.textContent}}setUserInfo(e,t){this._profileName.textContent=e,this._profileJob.textContent=t}}({nameSelector:".profile__name",jobSelector:".profile__name-tag"}),E=new t({modalSelector:"#profile-edit",handleFormSubmit:e=>{f.setUserInfo(e["profile-modal-name"],e["profile-modal-job"]),E.close(),E.reset()}});a.addEventListener("click",(function(){p[d].resetValidation(),function(){const e=f.getUserInfo();m.value=e.profileName,_.value=e.profileJob}(),E.open()}));const v=new class{constructor(e,t){let{items:i,renderer:s}=e;this._renderer=s,this._initialArray=i,this._containerSelector=document.querySelector(t)}renderItems(){this._initialArray.forEach((e=>{this._renderer(e)}))}addItem(e){this._containerSelector.append(e)}prependItem(e){this._containerSelector.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},,{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}],renderer:e=>{const t=new n({src:e.link,alt:e.name},"#image-modal"),s=new i({data:e,selector:h,clickEventHandler:()=>{t.open()},deleteEventHandler:e=>{e.target.closest(".card").remove()},likeEventHandler:e=>{e.target.classList.toggle("card__heart_like")}}).getCardElement();v.addItem(s)}},".content__list");v.renderItems();const g=new t({modalSelector:"#add-card",handleFormSubmit:e=>{const t=e["add-card-title"],s=e["add-card-image-url"],r=new n({src:t,alt:s},"#image-modal"),o=new i({data:{name:t,link:s},selector:h,clickEventHandler:()=>{r.open()},deleteEventHandler:e=>{e.target.closest(".card").remove()},likeEventHandler:e=>{e.target.classList.toggle("card__heart_like")}}).getCardElement();v.prependItem(o),g.close(),g.reset()}});u.addEventListener("click",(function(){g.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFlSThHLEVBYk8sSUFBSTFHLEVBQUssQ0FDcEJDLEtBQU1tRyxFQUNObEcsU0FBVW9FLEVBQ1ZuRSxrQkFBbUIsS0FDakJzRyxFQUFVbEksTUFBTSxFQUVsQjZCLG1CQUFxQmhDLElBQ25CQSxFQUFJVyxPQUFPNEgsUUFBUSxTQUFTL0gsUUFBUSxFQUV0Q3lCLGlCQUFtQmpDLElBQ2pCQSxFQUFJVyxPQUFPTCxVQUFVa0ksT0FBTyxtQkFBbUIsSUFHMUJqRixpQkFDekJpRSxFQUFVUyxRQUFRSyxFQUFZLEdBR2xDLGtCQUdGZCxFQUFVTyxjQVFWLE1BQU1VLEVBQWMsSUFBSTVILEVBQWMsQ0FDcENyQixjQUFlLFlBQ2ZzQixpQkFBbUJzRyxJQUNqQixNQUFNc0IsRUFBUXRCLEVBQU8sa0JBQ2Z1QixFQUFNdkIsRUFBTyxzQkFDYmlCLEVBQVksSUFBSWxELEVBQ3BCLENBQ0VsQyxJQUFLeUYsRUFDTHhGLElBQUt5RixHQUVQLGdCQWVJTCxFQWJPLElBQUkxRyxFQUFLLENBQ3BCQyxLQUFNLENBQUVMLEtBQU1rSCxFQUFPckcsS0FBTXNHLEdBQzNCN0csU0FBVW9FLEVBQ1ZuRSxrQkFBbUIsS0FDakJzRyxFQUFVbEksTUFBTSxFQUVsQjZCLG1CQUFxQmhDLElBQ25CQSxFQUFJVyxPQUFPNEgsUUFBUSxTQUFTL0gsUUFBUSxFQUV0Q3lCLGlCQUFtQmpDLElBQ2pCQSxFQUFJVyxPQUFPTCxVQUFVa0ksT0FBTyxtQkFBbUIsSUFHMUJqRixpQkFDekJpRSxFQUFVVyxZQUFZRyxHQUN0QkcsRUFBWXZJLFFBQ1p1SSxFQUFZOUcsT0FBTyxJQVF2QndFLEVBQWM5RixpQkFBaUIsU0FKL0IsV0FDRW9JLEVBQVl0SSxNQUNkLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvc2NyaXB0cy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IobW9kYWxTZWxlY3Rvcikge1xuICAgIHRoaXMuX21vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihtb2RhbFNlbGVjdG9yKTtcbiAgICB0aGlzLl9tb2RhbENsb3NlID0gdGhpcy5fbW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2VcIik7XG4gICAgLy8gSSBoYXZlIHRvIHVzZSB0aGlzIHN0bXQgdG8gaGFuZGxlIHRoZSBlc2Mga2V5XG4gICAgLy8gZWxzZSB0aGUgd2hvbGUgd2luZG93IGlzIGdldHRpbmcgY2xvc2VkLlxuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcbiAgfVxuXG4gIF9oYW5kbGVFc2NDbG9zZShldnQpIHtcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICB0aGlzLl9tb2RhbC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlblwiKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX21vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuXCIpO1xuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9tb2RhbENsb3NlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xuXG4gICAgdGhpcy5fbW9kYWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZXZ0KSA9PiB7XG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9vcGVuXCIpKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgeyBQb3B1cCB9O1xuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5jbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcih7IG1vZGFsU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQgfSkge1xuICAgIHN1cGVyKG1vZGFsU2VsZWN0b3IpO1xuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9tb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICAgIHRoaXMuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpO1xuXG4gICAgdGhpcy5fZm9ybVZhbHVlcyA9IHt9O1xuXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICB0aGlzLl9mb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXMuX2Zvcm1WYWx1ZXM7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgfSk7XG4gIH1cblxuICByZXNldCgpIHtcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XG4gIH1cblxuICAvLyBjbG9zZSgpIHtcbiAgLy8gICBzdXBlci5jbG9zZSgpO1xuICAvLyAgdGhpcy5fbW9kYWwucmVzZXQoKTtcbiAgLy8gfVxufVxuXG5leHBvcnQgeyBQb3B1cFdpdGhGb3JtIH07XG4iLCJjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3Ioe1xuICAgIGRhdGEsXG4gICAgc2VsZWN0b3IsXG4gICAgY2xpY2tFdmVudEhhbmRsZXIsXG4gICAgZGVsZXRlRXZlbnRIYW5kbGVyLFxuICAgIGxpa2VFdmVudEhhbmRsZXIsXG4gIH0pIHtcbiAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICB0aGlzLl9zcmMgPSBkYXRhLmxpbms7XG4gICAgdGhpcy5fYWx0ID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX3RleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX3NlbGVjdG9yID0gc2VsZWN0b3I7XG4gICAgdGhpcy5fY2xpY2tFdmVudEhhbmRsZXIgPSBjbGlja0V2ZW50SGFuZGxlcjtcbiAgICB0aGlzLl9kZWxldGVFdmVudEhhbmRsZXIgPSBkZWxldGVFdmVudEhhbmRsZXI7XG4gICAgdGhpcy5fbGlrZUV2ZW50SGFuZGxlciA9IGxpa2VFdmVudEhhbmRsZXI7XG4gIH1cblxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xuICB9XG5cbiAgX2ZpbGxJbWFnZUNhcmQoKSB7XG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX3NyYztcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWx0ID0gdGhpcy5fYWx0O1xuICAgIHRoaXMuX2NhcmRMYWJlbC50ZXh0Q29udGVudCA9IHRoaXMuX3RleHRDb250ZW50O1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9jbGlja0V2ZW50SGFuZGxlcigpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fZGVsZXRlQ2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xuICAgICAgdGhpcy5fZGVsZXRlRXZlbnRIYW5kbGVyKGV2dCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xuICAgICAgdGhpcy5fbGlrZUV2ZW50SGFuZGxlcihldnQpO1xuICAgIH0pO1xuICB9XG4gIGdldENhcmRFbGVtZW50KCkge1xuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcbiAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19oZWFydFwiKTtcbiAgICB0aGlzLl9kZWxldGVDYXJkQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZVwiKTtcbiAgICB0aGlzLl9jYXJkTGFiZWwgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGFiZWwtdGV4dFwiKTtcbiAgICB0aGlzLl9maWxsSW1hZ2VDYXJkKCk7XG4gICAgdGhpcy5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICB9XG59XG5cbmV4cG9ydCB7IENhcmQgfTtcbiIsImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcihjb25maWdEaWN0LCBmb3JtRWxlbWVudCkge1xuICAgIHRoaXMuX2NvbmZpZ0RpY3QgPSBjb25maWdEaWN0O1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XG4gIH1cblxuICAvLyBJbiB0aGUgYmVsb3cgZnVuY3Rpb25zOlxuICAvLyBmb3JtRWxlbWVudCByZXByZXNlbnRzIGEgZm9ybVxuICAvLyBpbnB1dEVsZW1lbnQgcmVwcmVzZW50cyBhIHNwZWNpZmljIGlucHV0IGVsZW1lbnQgaW4gdGhlIGZvcm1cbiAgLy8gZXJyb3JNZXNzYWdlIHJlcHJlc2VudHMgdGhlIGVycm9yIG1lc3NhZ2UgZm9yIHRoZSBjb3JyZXNwb25kaW5nIGlucHV0IGZpZWxkXG5cbiAgX3Nob3dJbnB1dEVycm9yID0gKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSA9PiB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZ0RpY3RbXCJlcnJvckNsYXNzXCJdKTtcbiAgfTtcblxuICBfaGlkZUlucHV0RXJyb3IgPSAoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnRGljdFtcImVycm9yQ2xhc3NcIl0pO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG4gIH07XG5cbiAgX2hhc0luVmFsaWRJbnB1dCA9ICgpID0+IHtcbiAgICAvL2lucHV0TGlzdCBpcyBhIGxpc3Qgb2YgaW5wdXQgZmllbGRzIGJlbG9uZ2luZyB0byBhIGZvcm1cbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XG4gICAgfSk7XG4gIH07XG5cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlID0gKCkgPT4ge1xuICAgIGlmICh0aGlzLl9oYXNJblZhbGlkSW5wdXQoKSkge1xuICAgICAgLy8gdGhpcy5fYnV0dG9uRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCB0cnVlKTtcbiAgICAgIC8vIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZChcbiAgICAgIC8vIHRoaXMuX2NvbmZpZ0RpY3RbXCJpbmFjdGl2ZUJ1dHRvbkNsYXNzXCJdXG4gICAgICAvLyApO1xuICAgICAgdGhpcy5fZGlzYWJsZVN1Ym1pdCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXG4gICAgICAgIHRoaXMuX2NvbmZpZ0RpY3RbXCJpbmFjdGl2ZUJ1dHRvbkNsYXNzXCJdXG4gICAgICApO1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCB0cnVlKTtcbiAgICB9XG4gIH07XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eSA9IChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAvLyBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UgaXMgYXV0by1jcmVhdGVkIGJ5IHRoZSBicm93c2VyIGJhc2VkIG9uIHRoZSB2YWxpZGF0aW9uIGVycm9yXG4gICAgLy8gY29uc3QgaW5wdXRFbGVtZW50ID0gZXZ0LnRhcmdldDtcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH1cbiAgfTtcblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20oXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2NvbmZpZ0RpY3RbXCJpbnB1dFNlbGVjdG9yXCJdKVxuICAgICk7XG5cbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIHRoaXMuX2NvbmZpZ0RpY3RbXCJzdWJtaXRCdXR0b25TZWxlY3RvclwiXVxuICAgICk7XG5cbiAgICAvLyBUaGlzIHN0YXRlbWVudCB3aWxsIGhlbHAgdG8gc2V0IHRoZSBidXR0b24gc3RhdGUgYXBwcm9wcmlhdGVseSwgd2hlbiB0aGVcbiAgICAvLyBwYWdlIGxvYWRzIGluaXRpYWxseVxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG5cbiAgICAvLyBZb3UgbXVzdCB1c2UgYXJyb3cgZnVuY3Rpb24uIElmIG5vdCB1c2VkLCB3ZSB3aWxsIGdldCB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoKSBub3QgZm91bmQgZXJyb3JcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8vIFdoZW5ldmVyIGEgZm9ybSBpcyByZXNldCwgdGhlIGJ1dHRvbiB3aWxsIGJlIGRpc2FibGVkLCB1c2luZyB0aGUgZm9sbG93aW5nIHJlc2V0IGV2ZW50IGhhbmRsZXIuXG4gICAgLy8gQWx0ZXJuYXRpdmVseSB3ZSBjYW4gZGlzYWJsZSB0aGUgYnV0dG9uIHdoZW4gdGhlIG1vZGFsIGlzIG9wZW5lZCBmb3IgZGlzcGxheS5cbiAgICAvLyBTZWUgdGhlIGZ1bmN0aW9uIChzZWUgdGhlIGZ1bmN0aW9uOiBoYW5kbGVDcmVhdGVDYXJkU3VibWl0KGV2ZW50KSBpbiBpbmRleC5qcylcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwicmVzZXRcIiwgKCkgPT4ge1xuICAgICAgLy8gYHNldFRpbWVvdXRgIGlzIG5lZWRlZCB0byB3YWl0IHRpbGwgdGhlIGZvcm0gaXMgZnVsbHkgcmVzZXQgYW5kIHRoZW4gdG8gY2FsbCBgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKWBcbiAgICAgIC8vc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAvLyAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIC8vfSwgMCk7IC8vIGl04oCZcyBlbm91Z2ggdG8gcHV0IDAgbXMgaGVyZVxuICAgICAgdGhpcy5fZGlzYWJsZVN1Ym1pdCgpO1xuICAgIH0pO1xuICB9XG5cbiAgX2Rpc2FibGVTdWJtaXQgPSAoKSA9PiB7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCB0cnVlKTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnRGljdFtcImluYWN0aXZlQnV0dG9uQ2xhc3NcIl0pO1xuICB9O1xuXG4gIGVuYWJsZVZhbGlkYXRpb24gPSAoKSA9PiB7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfTtcblxuICByZXNldFZhbGlkYXRpb24gPSAoKSA9PiB7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGVsZW1lbnQpO1xuICAgIH0pO1xuICAgIHRoaXMuX2Rpc2FibGVTdWJtaXQoKTtcbiAgfTtcbn1cblxuZXhwb3J0IHsgRm9ybVZhbGlkYXRvciB9O1xuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5jbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IoeyBzcmMsIGFsdCB9LCBtb2RhbFNlbGVjdG9yKSB7XG4gICAgc3VwZXIobW9kYWxTZWxlY3Rvcik7XG4gICAgdGhpcy5fc3JjID0gc3JjO1xuICAgIHRoaXMuX2FsdCA9IGFsdDtcbiAgICB0aGlzLl9tb2RhbEltYWdlID0gdGhpcy5fbW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2UtZXhwYW5kZWRcIik7XG4gICAgdGhpcy5fbW9kYWxUZXh0ID0gdGhpcy5fbW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2UtbGFiZWxcIik7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICBjb25zb2xlLmxvZyh0aGlzLl9zcmMpO1xuICAgIGNvbnNvbGUubG9nKHRoaXMuX2FsdCk7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHRoaXMuX21vZGFsSW1hZ2Uuc3JjID0gdGhpcy5fc3JjO1xuICAgIHRoaXMuX21vZGFsSW1hZ2UuYWx0ID0gdGhpcy5fYWx0O1xuICAgIHRoaXMuX21vZGFsVGV4dC50ZXh0Q29udGVudCA9IHRoaXMuX2FsdDtcbiAgICBjb25zb2xlLmxvZyh0aGlzLl9tb2RhbEltYWdlLnNyYyk7XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG5cbmV4cG9ydCB7IFBvcHVwV2l0aEltYWdlIH07XG4iLCJpbXBvcnQgXCIuLi9wYWdlcy9pbmRleC5jc3NcIjtcblxuaW1wb3J0IHsgU2VjdGlvbiB9IGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCB7IFBvcHVwV2l0aEZvcm0gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgeyBVc2VySW5mbyB9IGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5cbmltcG9ydCB7IENhcmQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5cbmltcG9ydCB7IEZvcm1WYWxpZGF0b3IgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5cbmltcG9ydCB7IFBvcHVwV2l0aEltYWdlIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcblxuY29uc3QgeW9zbWl0ZUltYWdlID0gXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS95b3NlbWl0ZS5qcGdcIjtcbmNvbnN0IGxha2VMb3VzaWVJbWFnZSA9IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFrZS1sb3Vpc2UuanBnXCI7XG5jb25zdCBiYWxkTW91bnRhaW5zSW1hZ2UgPVxuICBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2JhbGQtbW91bnRhaW5zLmpwZ1wiO1xuY29uc3QgbGF0ZW1hckltYWdlID0gXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYXRlbWFyLmpwZ1wiO1xuY29uc3QgdmFub2lzZU5hdGlvbmFsSW1hZ2UgPSBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3Zhbm9pc2UuanBnXCI7XG5jb25zdCBsYWdvRGlCcmFpZXNJbWFnZSA9IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFnby5qcGdcIjtcblxuY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcbiAgICBsaW5rOiB5b3NtaXRlSW1hZ2UsXG4gIH0sXG5cbiAgLFxuICB7XG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxuICAgIGxpbms6IGxha2VMb3VzaWVJbWFnZSxcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcbiAgICBsaW5rOiBiYWxkTW91bnRhaW5zSW1hZ2UsXG4gIH0sXG4gIHsgbmFtZTogXCJMYXRlbWFyXCIsIGxpbms6IGxhdGVtYXJJbWFnZSB9LFxuICB7XG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcbiAgICBsaW5rOiB2YW5vaXNlTmF0aW9uYWxJbWFnZSxcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcbiAgICBsaW5rOiBsYWdvRGlCcmFpZXNJbWFnZSxcbiAgfSxcbl07XG5cbi8vIEdsb2JhbCBkaWN0IGZvciB2YWxpZGF0aW9uIG9mIGZvcm0gZWxlbWVudHNcbmNvbnN0IGNvbmZpZ0RpY3QgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXG4gIGlucHV0RXJyb3JTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0LWVycm9yXCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fc3VibWl0XCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX3N1Ym1pdF9pbmFjdGl2ZVwiLFxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dC1lcnJvcl9kaXNwbGF5XCIsXG59O1xuXG4vLyBHbG9iYWwgdmFyaWFibGUgdG8gc2VsZWN0IGFsbCBmb3Jtc1xuLy8gQWxzbyBjb252ZXJ0IHRoZSBwc2V1ZG8gYXJyYXkgdG8gbm9ybWFsIGFycmF5IHVzaW5nIEFycmF5LmZyb20oKS5cbi8vIFdpdGhvdXQgdXNpbmcgQXJyYXkuZnJvbSgpLCB3ZSBjYW5ub3QgcGFyc2UgdGhyb3VnaCB0aGUgZm9ybXMgdG8gZW5hYmxlXG4vLyBpbnB1dCBmaWVsZCB2YWxpZGF0aW9uXG5jb25zdCBhbGxGb3JtcyA9IEFycmF5LmZyb20oXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnRGljdFtcImZvcm1TZWxlY3RvclwiXSlcbik7XG5cbi8vIEdsb2JhbCB2YXJpYWJsZXMgdG8gc3VwcG9ydCBQcm9maWxlIGVkaXRpbmcvc2F2aW5nXG5jb25zdCBwcm9maWxlUGVuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19wZW5cIik7XG4vL2NvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uYW1lXCIpO1xuLy9jb25zdCBwcm9maWxlTmFtZVRhZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fbmFtZS10YWdcIik7XG5cbmNvbnN0IHByb2ZpbGVNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0XCIpO1xuY29uc3QgcHJvZmlsZUZvcm1FbGVtZW50ID0gcHJvZmlsZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG5jb25zdCBwcm9maWxlRm9ybU5hbWUgPSBwcm9maWxlRm9ybUVsZW1lbnRbXCJuYW1lXCJdO1xuY29uc3QgcHJvZmlsZU1vZGFsTmFtZUlucHV0ID0gcHJvZmlsZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1tb2RhbC1uYW1lXCIpO1xuY29uc3QgcHJvZmlsZU1vZGFsSm9iSW5wdXQgPSBwcm9maWxlTW9kYWwucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLW1vZGFsLWpvYlwiKTtcblxuLy8gR2xvYmFsIHZhcmlhYmxlcyBmb3IgY2FyZCB0ZW1wbGF0ZVxuY29uc3QgY2FyZFRlbXBsYXRlSUQgPSBcIiNjYXJkXCI7XG5cbi8vIEdsb2JhbCB2YXJpYWJsZSBmb3IgYWxsIGNhcmRzIGNvbnRhaW5lclxuLy8gY29uc3QgY29udGVudExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRlbnRfX2xpc3RcIik7XG5cbi8vIEdsb2JhbCB2YXJpYWJsZXMgdG8gc3VwcG9ydCBuZXcgY2FyZCBhZGRpdGlvbiBsb2dpY1xuY29uc3QgYWRkQ2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcbmNvbnN0IGFkZENhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmRcIik7XG5jb25zdCBhZGRDYXJkRm9ybUVsZW1lbnQgPSBhZGRDYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbi8vY29uc3QgYWRkQ2FyZEZvcm1OYW1lID0gYWRkQ2FyZEZvcm1FbGVtZW50W1wibmFtZVwiXTtcbi8vY29uc3QgY2FyZFRpdGxlID0gYWRkQ2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtdGl0bGVcIik7XG4vL2NvbnN0IGNhcmRVUkwgPSBhZGRDYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1pbWFnZS11cmxcIik7XG5cbi8vIEFkZCBmb3JtcyBpbnB1dCB2YWxpZGF0b3JzXG4vLyBmb3JtVmFsaWRhdG9ycyBvYmplY3RzIHdpbGwgY29udGFpbiB0aGUgZm9ybSBuYW1lIGFzIHRoZSBrZXlcbi8vIGFuZCBGb3JtVmFsaWRhdG9yIG9iamVjdCBhcyBpdHMgdmFsdWUuXG5jb25zdCBmb3JtVmFsaWRhdG9ycyA9IHt9O1xuXG5hbGxGb3Jtcy5mb3JFYWNoKChmb3JtKSA9PiB7XG4gIGNvbnN0IGZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWdEaWN0LCBmb3JtKTtcbiAgZm9ybVZhbGlkYXRvcnNbZm9ybVtcIm5hbWVcIl1dID0gZm9ybVZhbGlkYXRvcjtcbiAgZm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG59KTtcblxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xuICBuYW1lU2VsZWN0b3I6IFwiLnByb2ZpbGVfX25hbWVcIixcbiAgam9iU2VsZWN0b3I6IFwiLnByb2ZpbGVfX25hbWUtdGFnXCIsXG59KTtcblxuLy8gQ3JlYXRlIHByb2ZpbGVGb3JtIG9iamVjdFxuY29uc3QgcHJvZmlsZUZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gIG1vZGFsU2VsZWN0b3I6IFwiI3Byb2ZpbGUtZWRpdFwiLFxuICBoYW5kbGVGb3JtU3VibWl0OiAoaW5wdXRzKSA9PiB7XG4gICAgdXNlckluZm8uc2V0VXNlckluZm8oXG4gICAgICBpbnB1dHNbXCJwcm9maWxlLW1vZGFsLW5hbWVcIl0sXG4gICAgICBpbnB1dHNbXCJwcm9maWxlLW1vZGFsLWpvYlwiXVxuICAgICk7XG4gICAgcHJvZmlsZUZvcm0uY2xvc2UoKTtcbiAgICBwcm9maWxlRm9ybS5yZXNldCgpO1xuICB9LFxufSk7XG5cbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbi8qIEhhbmRsZSBwcm9maWxlIHBlbiBidXR0b24gY2xpY2sgKi9cbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbi8vIEhlbHBlciBmdW5jdGlvbiB0byBmaWxsIHRoZSBwcm9maWxlIGZvcm0gb25jZSB2aXNpYmxlXG5mdW5jdGlvbiBmaWxsUHJvZmlsZUZvcm0oKSB7XG4gIGNvbnN0IHByb2ZpbGUgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICBwcm9maWxlTW9kYWxOYW1lSW5wdXQudmFsdWUgPSBwcm9maWxlLnByb2ZpbGVOYW1lO1xuICBwcm9maWxlTW9kYWxKb2JJbnB1dC52YWx1ZSA9IHByb2ZpbGUucHJvZmlsZUpvYjtcbn1cblxuZnVuY3Rpb24gaGFuZGxlRWRpdFByb2ZpbGUoKSB7XG4gIGZvcm1WYWxpZGF0b3JzW3Byb2ZpbGVGb3JtTmFtZV0ucmVzZXRWYWxpZGF0aW9uKCk7XG4gIGZpbGxQcm9maWxlRm9ybSgpO1xuICBwcm9maWxlRm9ybS5vcGVuKCk7XG59XG5cbnByb2ZpbGVQZW4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZUVkaXRQcm9maWxlKTtcblxuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuLyogSGFuZGxlIGNhcmRzIGFkZGl0aW9uIGxvZ2ljICAgICAqL1xuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4vLyBGaWxsIHdpdGggZGVmYXVsdCBjYXJkcyBpbml0aWFsbHlcbi8vICh7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcilcbi8vICAgIGhhbmRsZURlbGV0ZUNhcmQsIGhhbmRsZUxpa2VDYXJkLCBoYW5kbGVFeHBhbmRDYXJkXG5jb25zdCBjYXJkc0xpc3QgPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXG4gICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XG4gICAgICBjb25zdCBtb2RhbENhcmQgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXG4gICAgICAgIHtcbiAgICAgICAgICBzcmM6IGl0ZW0ubGluayxcbiAgICAgICAgICBhbHQ6IGl0ZW0ubmFtZSxcbiAgICAgICAgfSxcbiAgICAgICAgXCIjaW1hZ2UtbW9kYWxcIlxuICAgICAgKTtcbiAgICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZCh7XG4gICAgICAgIGRhdGE6IGl0ZW0sXG4gICAgICAgIHNlbGVjdG9yOiBjYXJkVGVtcGxhdGVJRCxcbiAgICAgICAgY2xpY2tFdmVudEhhbmRsZXI6ICgpID0+IHtcbiAgICAgICAgICBtb2RhbENhcmQub3BlbigpO1xuICAgICAgICB9LFxuICAgICAgICBkZWxldGVFdmVudEhhbmRsZXI6IChldnQpID0+IHtcbiAgICAgICAgICBldnQudGFyZ2V0LmNsb3Nlc3QoXCIuY2FyZFwiKS5yZW1vdmUoKTtcbiAgICAgICAgfSxcbiAgICAgICAgbGlrZUV2ZW50SGFuZGxlcjogKGV2dCkgPT4ge1xuICAgICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2hlYXJ0X2xpa2VcIik7XG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5nZXRDYXJkRWxlbWVudCgpO1xuICAgICAgY2FyZHNMaXN0LmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xuICAgIH0sXG4gIH0sXG4gIFwiLmNvbnRlbnRfX2xpc3RcIlxuKTtcblxuY2FyZHNMaXN0LnJlbmRlckl0ZW1zKCk7XG5cbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbi8qIE5ldyBjYXJkcyBhZGRpdGlvbiBsb2dpYyAgICAgICAgKi9cbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuLy8gSGFuZGxlIHRoZSBBREQgYnV0dG9uICh0byBhZGQgY2FyZHMpXG4vLyBtb2RhbFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0XG5jb25zdCBhZGRDYXJkRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgbW9kYWxTZWxlY3RvcjogXCIjYWRkLWNhcmRcIixcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGlucHV0cykgPT4ge1xuICAgIGNvbnN0IHRpdGxlID0gaW5wdXRzW1wiYWRkLWNhcmQtdGl0bGVcIl07XG4gICAgY29uc3QgdXJsID0gaW5wdXRzW1wiYWRkLWNhcmQtaW1hZ2UtdXJsXCJdO1xuICAgIGNvbnN0IG1vZGFsQ2FyZCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcbiAgICAgIHtcbiAgICAgICAgc3JjOiB0aXRsZSxcbiAgICAgICAgYWx0OiB1cmwsXG4gICAgICB9LFxuICAgICAgXCIjaW1hZ2UtbW9kYWxcIlxuICAgICk7XG4gICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKHtcbiAgICAgIGRhdGE6IHsgbmFtZTogdGl0bGUsIGxpbms6IHVybCB9LFxuICAgICAgc2VsZWN0b3I6IGNhcmRUZW1wbGF0ZUlELFxuICAgICAgY2xpY2tFdmVudEhhbmRsZXI6ICgpID0+IHtcbiAgICAgICAgbW9kYWxDYXJkLm9wZW4oKTtcbiAgICAgIH0sXG4gICAgICBkZWxldGVFdmVudEhhbmRsZXI6IChldnQpID0+IHtcbiAgICAgICAgZXZ0LnRhcmdldC5jbG9zZXN0KFwiLmNhcmRcIikucmVtb3ZlKCk7XG4gICAgICB9LFxuICAgICAgbGlrZUV2ZW50SGFuZGxlcjogKGV2dCkgPT4ge1xuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19oZWFydF9saWtlXCIpO1xuICAgICAgfSxcbiAgICB9KTtcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2V0Q2FyZEVsZW1lbnQoKTtcbiAgICBjYXJkc0xpc3QucHJlcGVuZEl0ZW0oY2FyZEVsZW1lbnQpO1xuICAgIGFkZENhcmRGb3JtLmNsb3NlKCk7XG4gICAgYWRkQ2FyZEZvcm0ucmVzZXQoKTtcbiAgfSxcbn0pO1xuXG5mdW5jdGlvbiBoYW5kbGVDYXJkQWRkQnV0dG9uQ2xpY2soKSB7XG4gIGFkZENhcmRGb3JtLm9wZW4oKTtcbn1cblxuYWRkQ2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlQ2FyZEFkZEJ1dHRvbkNsaWNrKTtcbiIsImNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGpvYlNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLl9uYW1lU2VsZWN0b3IgPSBuYW1lU2VsZWN0b3I7XG4gICAgdGhpcy5fam9iU2VsZWN0b3IgPSBqb2JTZWxlY3RvcjtcbiAgICB0aGlzLl9wcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLl9wcm9maWxlSm9iID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihqb2JTZWxlY3Rvcik7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcHJvZmlsZU5hbWU6IHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50LFxuICAgICAgcHJvZmlsZUpvYjogdGhpcy5fcHJvZmlsZUpvYi50ZXh0Q29udGVudCxcbiAgICB9O1xuICB9XG5cbiAgc2V0VXNlckluZm8ocHJvZmlsZU5hbWUsIHByb2ZpbGVKb2IpIHtcbiAgICB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IHByb2ZpbGVOYW1lO1xuICAgIHRoaXMuX3Byb2ZpbGVKb2IudGV4dENvbnRlbnQgPSBwcm9maWxlSm9iO1xuICB9XG59XG5cbmV4cG9ydCB7IFVzZXJJbmZvIH07XG4iLCJjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2luaXRpYWxBcnJheSA9IGl0ZW1zO1xuICAgIHRoaXMuX2NvbnRhaW5lclNlbGVjdG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gIH1cblxuICByZW5kZXJJdGVtcygpIHtcbiAgICB0aGlzLl9pbml0aWFsQXJyYXkuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgY29uc3QgZWxlbWVudCA9IHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgIH0pO1xuICB9XG5cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyU2VsZWN0b3IuYXBwZW5kKGVsZW1lbnQpO1xuICB9XG5cbiAgcHJlcGVuZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lclNlbGVjdG9yLnByZXBlbmQoZWxlbWVudCk7XG4gIH1cbn1cblxuZXhwb3J0IHsgU2VjdGlvbiB9O1xuIl0sIm5hbWVzIjpbIlBvcHVwIiwiY29uc3RydWN0b3IiLCJtb2RhbFNlbGVjdG9yIiwidGhpcyIsIl9tb2RhbCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIl9tb2RhbENsb3NlIiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsImV2dCIsImtleSIsImNsb3NlIiwib3BlbiIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfZm9ybSIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2dldElucHV0VmFsdWVzIiwiX2lucHV0TGlzdCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfZm9ybVZhbHVlcyIsImZvckVhY2giLCJpbnB1dCIsIm5hbWUiLCJ2YWx1ZSIsInByZXZlbnREZWZhdWx0IiwicmVzZXQiLCJDYXJkIiwiZGF0YSIsInNlbGVjdG9yIiwiY2xpY2tFdmVudEhhbmRsZXIiLCJkZWxldGVFdmVudEhhbmRsZXIiLCJsaWtlRXZlbnRIYW5kbGVyIiwiY29uc29sZSIsImxvZyIsIl9zcmMiLCJsaW5rIiwiX2FsdCIsIl90ZXh0Q29udGVudCIsIl9zZWxlY3RvciIsIl9jbGlja0V2ZW50SGFuZGxlciIsIl9kZWxldGVFdmVudEhhbmRsZXIiLCJfbGlrZUV2ZW50SGFuZGxlciIsIl9nZXRUZW1wbGF0ZSIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfZmlsbEltYWdlQ2FyZCIsIl9jYXJkSW1hZ2UiLCJzcmMiLCJhbHQiLCJfY2FyZExhYmVsIiwidGV4dENvbnRlbnQiLCJfZGVsZXRlQ2FyZEJ1dHRvbiIsIl9jYXJkTGlrZUJ1dHRvbiIsImdldENhcmRFbGVtZW50IiwiX2VsZW1lbnQiLCJGb3JtVmFsaWRhdG9yIiwiY29uZmlnRGljdCIsImZvcm1FbGVtZW50IiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiX2Zvcm1FbGVtZW50IiwiaWQiLCJfY29uZmlnRGljdCIsInNvbWUiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hhc0luVmFsaWRJbnB1dCIsIl9kaXNhYmxlU3VibWl0IiwiX2J1dHRvbkVsZW1lbnQiLCJyZW1vdmVBdHRyaWJ1dGUiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInNldEF0dHJpYnV0ZSIsIl9zZXRFdmVudExpc3RlbmVycyIsImVsZW1lbnQiLCJBcnJheSIsImZyb20iLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiUG9wdXBXaXRoSW1hZ2UiLCJfbW9kYWxJbWFnZSIsIl9tb2RhbFRleHQiLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiaW5wdXRFcnJvclNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiZXJyb3JDbGFzcyIsImFsbEZvcm1zIiwicHJvZmlsZVBlbiIsInByb2ZpbGVNb2RhbCIsInByb2ZpbGVGb3JtTmFtZSIsInByb2ZpbGVNb2RhbE5hbWVJbnB1dCIsInByb2ZpbGVNb2RhbEpvYklucHV0IiwiY2FyZFRlbXBsYXRlSUQiLCJhZGRDYXJkQnV0dG9uIiwiZm9ybVZhbGlkYXRvcnMiLCJmb3JtIiwiZm9ybVZhbGlkYXRvciIsImVuYWJsZVZhbGlkYXRpb24iLCJ1c2VySW5mbyIsIm5hbWVTZWxlY3RvciIsImpvYlNlbGVjdG9yIiwiX25hbWVTZWxlY3RvciIsIl9qb2JTZWxlY3RvciIsIl9wcm9maWxlTmFtZSIsIl9wcm9maWxlSm9iIiwiZ2V0VXNlckluZm8iLCJwcm9maWxlTmFtZSIsInByb2ZpbGVKb2IiLCJzZXRVc2VySW5mbyIsInByb2ZpbGVGb3JtIiwiaW5wdXRzIiwicmVzZXRWYWxpZGF0aW9uIiwicHJvZmlsZSIsImZpbGxQcm9maWxlRm9ybSIsImNhcmRzTGlzdCIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9yZW5kZXJlciIsIl9pbml0aWFsQXJyYXkiLCJfY29udGFpbmVyU2VsZWN0b3IiLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJhZGRJdGVtIiwiYXBwZW5kIiwicHJlcGVuZEl0ZW0iLCJwcmVwZW5kIiwibW9kYWxDYXJkIiwiY2FyZEVsZW1lbnQiLCJjbG9zZXN0IiwidG9nZ2xlIiwiYWRkQ2FyZEZvcm0iLCJ0aXRsZSIsInVybCJdLCJzb3VyY2VSb290IjoiIn0=